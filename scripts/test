#!/usr/bin/env bash
set -euo pipefail

root_dir="$(cd -- "$(dirname -- "${BASH_SOURCE[0]}")/.." && pwd)"

find "$root_dir/bin" "$root_dir/lib" "$root_dir/scripts" -type f -print0 \
  | xargs -0 bash -n

bash -n "$root_dir/install.sh" "$root_dir/uninstall.sh"

"$root_dir/bin/shellrig" hello >/dev/null

if command -v zsh >/dev/null 2>&1; then
  zsh -n "$root_dir/zsh/"*.zsh
  zsh -fc "source \"$root_dir/zsh/shellrig.zsh\""
else
  echo "error: zsh not found in PATH" >&2
  exit 1
fi
